# Railway multi-service configuration
# Note: Each service needs to be created in Railway dashboard first,
# then this config will be applied on deploy.

[build]
builder = "NIXPACKS"
buildCommand = "npm run build"

# Main web application
[deploy]
startCommand = "npm start"
healthcheckPath = "/api/health"
healthcheckTimeout = 30
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# To create worker services:
# 1. Go to Railway dashboard
# 2. Click "New" -> "Empty Service"
# 3. Name it "market-worker" or "market-context-worker"
# 4. In Settings -> Deploy, set:
#    - Start Command: npm run market-worker
#    - Or: npm run market-context-worker
# 5. In Variables, add:
#    - REDIS_URL (required)
#    - MASSIVE_API_KEY (required)
#    - FINNHUB_API_KEY (optional, for calendar)
#    - DEBUG=1 (optional, for verbose logs)
